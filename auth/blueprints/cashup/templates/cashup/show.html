{% extends 'layouts/default.html' %}
{% from 'helpers/form.html' import group %}

{% set page_title = 'Show Cashup' %}
{% set show_gateway = current_user.has_role('super-admin') or current_user.has_role('network-admin') %}

{% block content %}
<div class="cashup-show content">
    {% if show_gateway %}
        <div>
            <strong>Gateway</strong> {{ instance.gateway }}
        </div>
    {% endif %}

    <div>
        <strong>Created At</strong> {{ instance.created_at | datetimeformat }}
    </div>

    <div>
        <strong>User</strong> {{ instance.user }}
    </div>

    {% if instance.transactions.count() %}
        <h3>
            Transactions
        </h3>

        <ul>
            {% for transaction in instance.transactions %}
            <li>
                <a href="{{ url_for('transaction.show', hash=transaction.hash) }}">{{ transaction }}</a> - {{ transaction.type[0].upper() + transaction.type[1:] }} {{ transaction.status }} for {{ transaction.currency.render_amount(transaction.total_amount) }} via {{ transaction.processor }}.
            </li>
            {% endfor %}
        </ul>
    {% endif %}

    {% if instance.adjustments.count() %}
        <h3>
            Adjustments
        </h3>

        <ul>
            {% for adjustment in instance.adjustments %}
            <li>
                <a href="{{ url_for('.adjustment_show', hash=adjustment.hash) }}">{{ adjustment }}</a> - {{ adjustment.currency.render_amount(adjustment.amount) }} cash {{ adjustment.direction }} for {{ adjustment.reason }}.
                {% if adjustment.reference_number %} (Reference {{ adjustment.reference_number }}){% endif %}
            </li>
            {% endfor %}
        </ul>
    {% endif %}
</div>
{% endblock %}
